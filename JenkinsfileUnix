pipeline {
  
  agent any

  tools {
      	maven 'mvn'
	jdk 'jdk'
  }
  
  stages {
  
    stage ('1. Checkout') {
      steps {
        checkout scm
        echo 'Checkout'
      }
    }
  
    stage ('2. Compile') {
      steps {
          sh 'mvn clean compile test-compile'
      }
    }
    
    stage ('3. Unit Test') {
      steps {
          sh 'mvn test'
      }
    }

    stage ('4. Package') {
      steps {
          sh 'mvn -Dmaven.test.skip=true package verify'
      }
    }

    stage ('5. Archive Artifacts') {
      steps {
          archiveArtifacts 'target/*.jar'
      }
    }    
  }
    post {
        always {
            junit allowEmptyResults: true, testResults: 'target/surefire-reports/*.xml'
        }
    }
}
